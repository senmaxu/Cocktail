<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.cocktail.mapper.ProductonsMapper">
<select id="findByPage" resultType="Productions">
SELECT id, ProName,picture,price from productions
 <trim prefix="where" prefixOverrides="and | or">
<if test="ProName != null and ProName != ''">
and ProName LIKE CONCAT('%',#{ProName},'%') 
</if> 
<if test="brand !=null and brand!=0 ">
and brand=#{brand}
</if>
<if test="type !=null and type !=0 ">
and type=#{type}
</if>
<if test="sales !=null and sales !=0 ">
order by sales=#{sales} DESC
</if>

<if test="price !=null and price !=0 ">
order by price=#{price} DESC
</if>
<if test="uploadTime !=null and uploadTime !=0 ">
order by uploadTime=#{uploadTime} DESC
</if>
</trim>
LIMIT #{index},#{size} 
</select>
 
<select id="countByPage" resultType="Integer" parameterType="hashmap">
select count(*) as count from productions
 <trim prefix="where" prefixOverrides="and | or">
<if test="ProName != null and ProName != ''">
and ProName LIKE CONCAT('%',#{ProName},'%') 
</if> 
<if test="brand !=null and brand!=0 ">
and brand=#{brand}
</if>
<if test="type !=null and type !=0 ">
and type=#{type}
</if>
<if test="sales !=null and sales !=0 ">
order by sales=#{sales} DESC
</if>
<if test="price !=null and price !=0 ">
order by price=#{price} DESC
</if>
<if test="uploadTime !=null and uploadTime !=0 ">
order by price=#{uploadTime} DESC
</if>
</trim>
</select>


<select id="findProductions" resultType="Productions">
select * from productions where id=#{id}

</select> 
</mapper>